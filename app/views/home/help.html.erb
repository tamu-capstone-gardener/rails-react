<div class="container mx-auto p-6" data-controller="tabs" data-tabs-default-value="before-you-begin">
    <h1 class="text-3xl font-bold theme-text-primary mb-2">How to Setup Your PlantHub</h1>

    <!-- Tab Buttons -->
    <div class="flex space-x-4 border-b pb-4 my-6" role="tablist">
        <% ['Before You Begin', 'Hardware', 'Software'].each do |tab| %>
        <button
            type="button"
            class="tab-btn text-lg font-medium px-3 py-2 rounded-md transition hover:cursor-pointer"
            data-action="tabs#switch"
            data-tabs-target="tab"
            data-tab="<%= tab.parameterize %>">
            <%= tab %>
        </button>
        <% end %>
    </div>

    <div class="space-y-8">
        <!-- Before You Begin Tab -->
        <div data-tabs-target="panel" data-tab-panel="before-you-begin" class="tab-panel flex flex-col gap-4">
            <div class="theme-bg-alt rounded-lg p-4">
                <p class="text-lg font-bold theme-text-secondary">
                    Welcome to your automatic garden! This guide will help you set everything up, even if you're brand new to technology. If you can follow a recipe or use a laptop, you can use PlantHub.
                </p>
            </div>
            <div class="theme-bg-alt rounded-lg">
                <div class="w-full p-4 h-full flex-0 flex theme-bg-alt-rotate rounded-t-lg">
                    <h2 class="text-2xl font-semibold theme-text-primary">Basic Terminology</h2>
                </div>
                <hr class="">
                <ul class="space-y-2 mt-4 px-4 py-2">
                    <li>
                        <span class="text-lg list-none list-outside font-bold">Plant Module:</span>
                        <ul class="theme-text-secondary list-disc list-inside ml-8">
                            <li>A group of plants (indoor or outdoor) with its own electrical system of sensors and pumps. For example, a tomato plant in a pot with a moisture sensor and a small watering pump.</li>
                        </ul>
                    </li>
                    <li>
                        <span class="text-lg font-bold">Sensor:</span>
                        <ul class="theme-text-secondary list-disc list-inside ml-8">
                            <li>A small device that can measure something, like how wet the soil is, how bright the light is, or how warm it is.</li>
                        </ul>
                    </li>
                    <li>
                        <span class="text-lg font-bold">Control Signal:</span>
                        <ul class="theme-text-secondary list-disc list-inside ml-8">
                            <li>A device or routine that you can turn on or off, like a water pump, light, or camera.</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Hardware Tab -->
        <div data-tabs-target="panel" data-tab-panel="hardware" class="flex tab-panel flex-col gap-4 hidden">
            <div class="theme-bg-alt rounded-lg">
                <div class="w-full p-4 h-full flex-0 flex theme-bg-alt-rotate rounded-t-lg">
                    <h2 class="text-2xl font-semibold theme-text-primary">Choosing Your Devices</h2>
                </div>

                <hr class="">
                <div class="px-4 py-2">
                    <h3 class="text-xl font-bold mt-4">Microcontroller</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>A microcontroller is like a tiny brain that connects your sensors and devices to the internet.</li>
                        <li>We recommend using an <%= link_to sanitize("ESP-32"), "https://www.espressif.com/en/products/socs/esp32", class: "theme-text-alt underline" %> microcontroller. It's affordable, easy to find, and works great with our code.</li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Sensors</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>Currently, we have two plant modules with various sensors, but don't let our sensor choices limit your imagination.</li>
                        <li>
                            <strong>In-soil garden:</strong>
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Temperature &amp; humidity sensor</li>
                                <li>Light sensor (digital and analog)</li>
                                <li>Soil moisture sensor</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Hydroponic garden:</strong>
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Water level sensor</li>
                                <li>Total dissolved solids (TDS) sensor (helps check nutrient levels)</li>
                            </ul>
                        </li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Control Devices</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>
                            <strong>In-soil garden:</strong>
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Power outlet (for lights and camera)</li>
                                <li>Water pump</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Hydroponic garden:</strong>
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Power outlet</li>
                                <li>4 pumps for nutrients (one for each of N, P, K, and one to mix them)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="theme-bg-alt rounded-lg">
                <div class="w-full p-4 h-full flex-0 flex theme-bg-alt-rotate rounded-t-lg">
                    <h2 class="text-2xl font-semibold theme-text-primary">Connecting with Hardware</h2>
                </div>

                <hr class="">
                <div class="px-4 py-2">
                    <h3 class="text-xl font-bold mt-4">Setting Up the ESP-32</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>Download VS Code (a free app for coding).</li>
                        <li>Install the PlatformIO extension inside VS Code.</li>
                        <li>Open our microcontroller code from GitHub.</li>
                        <li>Clone the files onto your computer.</li>
                        <li>Find the file called <%= link_to sanitize("setup.py"), "https://github.com/tamu-capstone-gardener/microcontroller/blob/main/setup.py", class: "theme-text-alt underline"%> — this helps set up your garden.</li>
                        <li>Enter your WiFi details at the top of the file and update the <%= link_to sanitize("wifi_manager.cpp"), "https://github.com/tamu-capstone-gardener/microcontroller/blob/main/src/wifi_manager.cpp", class: "theme-text-alt underline" %> file if needed.</li>
                        <li>Run the command: <code>python setup.py</code></li>
                        <li>Follow the prompts to enter your garden's ID, sensors, and devices.</li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Choosing Pins on your Microcontroller</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>Microcontrollers have small numbered pins where you plug in your sensors and devices. Here's what you need to know:</li>
                        <li>
                            <strong>Analog Sensors</strong> (like the light sensor) must use pins 32-39.
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Pins 34-39 can only be used for analog sensors.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Digital Sensors &amp; Control Devices</strong> (like the DHT sensor or a relay for a water pump) can use pins 0-33.
                        </li>
                        <li>
                            <strong>Important:</strong>
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Don't use analog sensors on pins from ADC2 — the WiFi uses this part already.</li>
                                <li>Always connect the grounds of all your devices.</li>
                                <li>Double-check how much power your devices need!</li>
                                <li>Write down which pin is connected to what — you'll need this when setting up the software.</li>
                            </ul>
                        </li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Control Signals</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>As mentioned in previous sections, we have only used digital writes to take advantage of relays.</li>
                        <li>As a result, GPIO pins 0-33 are fit for any control signals.</li>
                    </ul>
                </div>
            </div>
            <div class="theme-bg-alt rounded-lg">
                <div class="w-full p-4 h-full flex-0 flex theme-bg-alt-rotate rounded-t-lg">
                    <h2 class="text-2xl font-semibold">Tips</h3>
                </div>
                <hr>
                <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2 px-4 py-2">
                    <li>Always connect your grounds together first!</li>
                    <li>Check the current draw of any sensors or relays.</li>
                    <li>Write down which "read or write" pin connects to which GPIO pin for later configuration.</li>
                </ul>
            </div>
        </div>

        <!-- Software Tab -->
        <div data-tabs-target="panel" data-tab-panel="software" class="tab-panel hidden">
            <div class="theme-bg-alt rounded-lg">
                <div class="w-full p-4 h-full flex-0 flex theme-bg-alt-rotate rounded-t-lg">
                    <h2 class="text-2xl font-semibold theme-text-primary">Using the PlantHub Website</h2>
                </div>
                <hr>

                <div class="px-4 py-2">
                    <h3 class="text-xl font-bold mt-4">Navigation Menu</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>Click the menu icon (☰) to:
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Go to the Home Page</li>
                                <li>View your plant modules</li>
                                <li>Change settings</li>
                                <li>Revisit this help guide</li>
                            </ul>
                        </li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Home Page</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>Coming soon - once the design is finalized, this section will be updated.</li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Plant Modules Page</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>This is where you set up your garden online.</li>
                        <li>Click "Create Module".</li>
                        <li>Give it a name (like “Tomato Pot” or “Indoor Herbs”).</li>
                        <li>Choose whether it's for indoor or outdoor plants.</li>
                        <li>Add the plants in your module:
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Use our beginner filter to keep things simple.</li>
                                <li>Or search for specific plants if you already have something in mind.</li>
                            </ul>
                        </li>
                        <li>Once you're happy, click "Create Module" again to finish:
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Tip: When your module is created, copy the ID from the website address (it will look like plant_modules/12345).</li>
                                <li>You'll need this ID when running the setup.py script mentioned earlier.</li>
                            </ul>
                        </li>
                        <li>Now refresh the page, and you'll see your PlantHub synced with your real garden!</li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Viewing Sensor Data</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>Click on a sensor to see a history of its readings.</li>
                        <li>You can also rename the sensor or change the units if needed.</li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Using Control Signals</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>By default, devices like pumps are set to manual mode.</li>
                        <li>You can also set them to:
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Automatic: Turns on/off based on sensor data</li>
                                <li>Scheduled: Turns on at specific times (like every morning)</li>
                            </ul>
                        </li>
                        <li>If you want to change how long something runs (for example, water for 3 seconds instead of 5), you can adjust the duration setting for each control device.</li>
                        <li>You can also rename your control devices to match your setup (e.g., “Front Pot Pump”).</li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Notifications</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>PlantHub can send alerts to keep you informed.</li>
                        <li>You can:
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>Get notifications by email or push notification</li>
                                <li>Choose which sensors or devices send alerts</li>
                                <li>Customize the messages</li>
                            </ul>
                        </li>
                        <li>Push Notifications Tip (iOS users):
                            <ul class="list-disc list-inside ml-6 space-y-1">
                                <li>To get alerts, add our website to your Home Screen and allow notifications.</li>
                            </ul>
                        </li>
                    </ul>

                    <h3 class="text-xl font-bold mt-4">Social Media Integration</h3>
                    <ul class="list-disc list-inside theme-text-secondary ml-4 space-y-2">
                        <li>Coming soon - stay tuned for updates on how to share your garden with friends!</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
